<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CrashTestDummiesDoc: IAI Kinect2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CrashTestDummiesDoc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">IAI Kinect2 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Maintainer</h2>
<ul>
<li><a href="https://ai.uni-bremen.de/team/thiemo_wiedemeyer">Thiemo Wiedemeyer</a> &lt;<a href="#" onclick="location.href='mai'+'lto:'+'wie'+'de'+'mey'+'er'+'@cs'+'.u'+'ni-'+'br'+'eme'+'n.'+'de'; return false;">wiede<span style="display: none;">.nosp@m.</span>meye<span style="display: none;">.nosp@m.</span>r@cs.<span style="display: none;">.nosp@m.</span>uni-<span style="display: none;">.nosp@m.</span>breme<span style="display: none;">.nosp@m.</span>n.de</a>&gt;, <a href="http://ai.uni-bremen.de/">Institute for Artificial Intelligence</a>, University of Bremen</li>
</ul>
<h2>Read this first</h2>
<p>Please read this README and the ones of the individual components throughly before asking questions. We get a lot of repeated questions, so when you have a problem, we urge everyone to check the <a href="https://github.com/code-iai/iai_kinect2/issues?utf8=%E2%9C%93&amp;q=is%3Aissue">github issues (including closed ones)</a>. Your issue is very likely discussed there already.</p>
<p>The goal of this project is to give you a driver and the tools needed to receive data from the Kinect-2 sensor, in a way useful for robotics. You will still need to know how to use ROS to make use of it. Please follow the <a href="http://wiki.ros.org/ROS/Tutorials">ROS tutorials</a>. You will also need to learn how to work with point-clouds, or depth-clouds, or images (computer vision) to do useful things with the data.</p>
<p><em>Note:</em> <em><b>Please use the GitHub issues</b></em> <em>for questions and problems regarding the iai_kinect2 package and its components.</em> <em><b>Do not write emails.</b></em></p>
<h2>Table of contents</h2>
<ul>
<li><a href="#description">Description</a></li>
<li><a href="#faq">FAQ</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#gpu-acceleration">GPU acceleration</a><ul>
<li><a href="#opencl-with-amd">OpenCL with AMD</a></li>
<li><a href="#openclcuda-with-nvidia">OpenCL/CUDA with Nvidia</a></li>
<li><a href="#opencl-with-intel">OpenCL with Intel</a></li>
</ul>
</li>
<li><a href="#citation">Citation</a></li>
<li><a href="#screenshots">Screenshots</a></li>
</ul>
<h2>Description</h2>
<p>This is a collection of tools and libraries for a ROS Interface to the Kinect One (Kinect v2).</p>
<p>It contains:</p><ul>
<li>[a calibration tool](kinect2_calibration) for calibrating the IR sensor of the Kinect One to the RGB sensor and the depth measurements</li>
<li>[a library](kinect2_registration) for depth registration with OpenCL support</li>
<li>[the bridge](kinect2_bridge) between <a href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a> and <a href="http://www.ros.org/">ROS</a></li>
<li>[a viewer](kinect2_viewer) for the images / point clouds</li>
</ul>
<h2>FAQ</h2>
<h4>If I have any question or someting is not working, what should I do first?</h4>
<p>First you should look at this FAQ and the <a href="https://github.com/OpenKinect/libfreenect2#faq">FAQ from libfreenect2</a>. Secondly, look at <a href="https://github.com/OpenKinect/libfreenect2/issues">issue page from libfreenect2</a> and the <a href="https://github.com/code-iai/iai_kinect2/issues">issue page of iai_kinect2</a> for similar issues and solutions.</p>
<h4>Point clouds are not being published?</h4>
<p>Point clouds are only published when the launch file is used. Make sure to start kinect2_bridge with <code>roslaunch kinect2_bridge kinect2_bridge.launch</code>.</p>
<h4>Will it work with OpenCV 3.0</h4>
<p>Short answer: No.</p>
<p>Long answer: Yes, it is possible to compile this package with OpenCV 3.0, but it will not work. This is because <a class="el" href="namespacecv__bridge.html">cv_bridge</a> is used, which itself is compiled with OpenCV 2.4.x in ROS Indigo/Jade and linking against both OpenCV versions is not possible. Working support for OpenCV 3.0 might come with a future ROS release.</p>
<h4>kinect2_bridge is not working / crashing, what is wrong?</h4>
<p>There are many reasons why <code>kinect2_bridge</code> might not working. The first thing to find out whether the problem is related to <code>kinect2_bridge</code> or <code>libfreenect2</code>. A good tool for testing is <code>Protonect</code>, it is a binary located in <code>libfreenect2/build/bin/Protonect</code>. It uses libfreenect2 directly with a minimal dependency on other libraries, so it is a good tool for the first tests.</p>
<p>Execute:</p><ul>
<li><code>./Protonect gl</code> to test OpenGL support.</li>
<li><code>./Protonect cl</code> to test OpenCL support.</li>
<li><code>./Protonect cpu</code> to test CPU support.</li>
</ul>
<p>Before running <code>kinect2_bridge</code> please make sure <code>Protonect</code> is working and showing color, depth and ir images. If some of them are black, than there is a problem not related to <code>kinect2_bridge</code> and you should look at the issues from the libfreenect2 GitHub page for help.</p>
<p>If one of them works, try out the one that worked with <code>kinect2_bridge</code>: <code>rosrun kinect2_bridge kinect2_bridge _depth_method:=&lt;opengl|opencl|cpu&gt;</code>. You can also change the registration method with <code>_reg_method:=&lt;cpu|opencl&gt;</code>.</p>
<h4>Protonect works fine, but kinect2_bridge is still not working / crashing.</h4>
<p>If that is the case, you have to make sure that <code>Protonect</code> uses the same version of <code>libfreenect2</code> as <code>kinect2_bridge</code> does. To do so, run <code>make</code> and <code>sudo make install</code> in the build folder again. And try out <code>kinect2_bridge</code> again.</p>
<div class="fragment"><div class="line">cd libfreenect2/build</div><div class="line">make &amp; sudo make install</div></div><!-- fragment --><p>Also make sure that you are not using OpenCV 3.0.</p>
<p>If it is still crashing, compile it in debug and run it with gdb:</p>
<div class="fragment"><div class="line">cd &lt;catkin_ws&gt;</div><div class="line">catkin_make -DCMAKE_BUILD_TYPE=&quot;Debug&quot;</div><div class="line">cd devel/lib/kinect2_bridge</div><div class="line">gdb kinect2_bridge</div><div class="line">// inside gdb: run until it crashes and do a backtrace</div><div class="line">run</div><div class="line">bt</div><div class="line">quit</div></div><!-- fragment --><p>Open an issue and post the problem description and the output from the backtrace (<code>bt</code>).</p>
<h4>kinect2_bridge hangs and prints "waiting for clients to connect"</h4>
<p>This is the normal behavior. 'kinect2_bridge' will only process data when clients are connected (ROS nodes listening to at least one of the topics). This saves CPU and GPU resources. As soon as you start the <code>kinect_viewer</code> or <code>rostopic hz</code> on one of the topics, processing should start.</p>
<h4>rosdep: Cannot locate rosdep definition for [kinect2_bridge] or [kinect2_registration]</h4>
<p><code>rosdep</code> will output errors on not being able to locate <code>[kinect2_bridge]</code> and <code>[kinect2_registration]</code>. That is fine because they are all part of the iai_kinect2 package and <code>rosdep</code> does not know these packages.</p>
<h4>Protonect or kinect2_bridge outputs [TransferPool::submit] failed to submit transfer</h4>
<p>This indicates problems with the USB connection.</p>
<h4>I still have an issue, what should I do?</h4>
<p>First of all, check the issue pages on GitHub for similar issues, as they might contain solutions for them. By default you will only see the open issues, but if you click on <code>closed</code> you will the the ones solved. There is also a search field which helps to find similar issues.</p>
<p>If you found no solution in the issues, feel free to open a new issue for your problem. Please describe your problem in detail and provide error messages and log output.</p>
<h2>Dependencies</h2>
<ul>
<li>ROS Hydro/Indigo</li>
<li>OpenCV (2.4.x, using the one from the official Ubuntu repositories is recommended)</li>
<li>PCL (1.7.x, using the one from the official Ubuntu repositories is recommended)</li>
<li>Eigen (optional, but recommended)</li>
<li>OpenCL (optional, but recommended)</li>
<li><a href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a> (&gt;= v0.2.0, for stability checkout the latest stable release)</li>
</ul>
<h2>Install</h2>
<ol type="1">
<li>Install the ROS. <a href="http://wiki.ros.org/indigo/Installation/Ubuntu">Instructions for Ubuntu 14.04</a></li>
<li><a href="http://wiki.ros.org/ROS/Tutorials/InstallingandConfiguringROSEnvironment">Setup your ROS environment</a></li>
<li><p class="startli">Install <a href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a>:</p>
<p class="startli">Follow <a href="https://github.com/OpenKinect/libfreenect2#debianubuntu-1404">the instructions</a> and enable C++11 by using <code>cmake .. -DENABLE_CXX11=ON</code> instead of <code>cmake ..</code></p>
<p class="startli">If something is not working, check out the latest stable release, for example <code>git checkout v0.2.0</code>.</p>
</li>
<li>Clone this repository into your catkin workspace, install the dependencies and build it:</li>
</ol>
<div class="fragment"><div class="line">cd ~/catkin_ws/src/</div><div class="line">git clone https://github.com/code-iai/iai_kinect2.git</div><div class="line">cd iai_kinect2</div><div class="line">rosdep install -r --from-paths .</div><div class="line">cd ~/catkin_ws</div><div class="line">catkin_make -DCMAKE_BUILD_TYPE=&quot;Release&quot;</div></div><!-- fragment --><p><em>Note: <code>rosdep</code> will output errors on not being able to locate <code>[kinect2_bridge]</code> and <code>[depth_registration]</code>. That is fine because they are all part of the iai_kinect2 package and <code>rosdep</code> does not know these packages.</em></p>
<p><em>Note: If you installed libfreenect2 somewhere else than in <code>$HOME/freenect2</code> or a standard location like <code>/usr/local</code> you have to specify the path to it by adding <code>-Dfreenect2_DIR=path_to_freenect2/lib/cmake/freenect2</code> to <code>catkin_make</code>.</em></p>
<ol type="1">
<li>Connect your sensor and run <code>kinect2_bridge</code>:</li>
</ol>
<div class="fragment"><div class="line">roslaunch kinect2_bridge kinect2_bridge.launch</div></div><!-- fragment --><ol type="1">
<li>Calibrate your sensor using the <code>kinect2_calibration</code>. <a href="kinect2_calibration#calibrating-the-kinect-one">Further details</a></li>
<li>Add the calibration files to the <code>kinect2_bridge/data/&lt;serialnumber&gt;</code> folder. <a href="kinect2_bridge#first-steps">Further details</a></li>
<li>Restart <code>kinect2_bridge</code> and view the results using <code>rosrun kinect2_viewer kinect2_viewer kinect2 sd cloud</code>.</li>
</ol>
<h2>GPU acceleration</h2>
<h3>OpenCL with AMD</h3>
<p>Install the latest version of the AMD Catalyst drivers from <a href="https://support.amd.com">https://support.amd.com</a> and follow the instructions. Also install <code>opencl-headers</code>.</p>
<div class="fragment"><div class="line">sudo apt-get install opencl-headers</div></div><!-- fragment --><h3>OpenCL/CUDA with Nvidia</h3>
<p>Go to <a href="https://developer.nvidia.com/cuda-downloads">developer.nvidia.com/cuda-downloads</a> and select <code>linux</code>, <code>x86_64</code>, <code>Ubuntu</code>, <code>14.04</code>, <code>deb(network)</code>. Download the file and follow the instructions. Also install <code>nvidia-modprobe</code> and <code>opencl-headers</code>.</p>
<div class="fragment"><div class="line">sudo apt-get install nvidia-modprobe opencl-headers</div></div><!-- fragment --><p>You also need to add CUDA paths to the system environment, add these lines to you <code>~/.bashrc</code>:</p>
<div class="fragment"><div class="line">export LD_LIBRARY_PATH=&quot;/usr/local/cuda/lib64:${LD_LIBRARY_PATH}&quot;</div><div class="line">export PATH=&quot;/usr/local/cuda/bin:${PATH}&quot;</div></div><!-- fragment --><p>A system-wide configuration of the libary path can be created with the following commands:</p>
<div class="fragment"><div class="line">echo &quot;/usr/local/cuda/lib64&quot; | sudo tee /etc/ld.so.conf.d/cuda.conf</div><div class="line">sudo ldconfig</div></div><!-- fragment --><h3>OpenCL with Intel</h3>
<p>You can either install a binary package from a PPA like <a href="https://launchpad.net/~floe/+archive/ubuntu/beignet">ppa:floe/beignet</a>, or build beignet yourself. It's recommended to use the binary from the PPA.</p>
<div class="fragment"><div class="line">sudo add-apt-repository ppa:floe/beignet &amp;&amp; sudo apt-get update</div><div class="line">sudo apt-get install beignet beignet-dev opencl-headers</div></div><!-- fragment --><h2>Citation</h2>
<p>If you used <code>iai_kinect2</code> for your work, please cite it.</p>
<div class="fragment"><div class="line">@misc{iai_kinect2,</div><div class="line">  author = {Wiedemeyer, Thiemo},</div><div class="line">  title = {{IAI Kinect2}},</div><div class="line">  organization = {Institute for Artificial Intelligence},</div><div class="line">  address = {University Bremen},</div><div class="line">  year = {2014 -- 2015},</div><div class="line">  howpublished = {\url{https://github.com/code-iai/iai\_kinect2}},</div><div class="line">  note = {Accessed June 12, 2015}</div><div class="line">}</div></div><!-- fragment --><p>The result should look something similar to this (may depend on the bibliography style used):</p>
<div class="fragment"><div class="line">T. Wiedemeyer, “IAI Kinect2,” https://github.com/code-iai/iai_kinect2,</div><div class="line">Institute for Artificial Intelligence, University Bremen, 2014 – 2015,</div><div class="line">accessed June 12, 2015.</div></div><!-- fragment --><h2>Screenshots</h2>
<p>Here are some screenshots from our toolkit: <img src="http://ai.uni-bremen.de/wiki/_media/software/kinect2_color.jpg" alt="color image" class="inline"/>
 <img src="http://ai.uni-bremen.de/wiki/_media/software/kinect2_depth_colored.png" alt="depth image" class="inline"/>
 <img src="http://ai.uni-bremen.de/wiki/_media/software/kinect2_cloud.png" alt="point cloud" class="inline"/>
 <img src="http://ai.uni-bremen.de/wiki/_media/software/kinect2_viewer.png" alt="image viewer" class="inline"/>
 </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
