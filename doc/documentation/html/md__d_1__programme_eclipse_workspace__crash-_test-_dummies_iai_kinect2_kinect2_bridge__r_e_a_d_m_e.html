<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CrashTestDummiesDoc: Kinect2 Bridge</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CrashTestDummiesDoc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Kinect2 Bridge </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Maintainer</h2>
<ul>
<li><a href="https://ai.uni-bremen.de/team/thiemo_wiedemeyer">Thiemo Wiedemeyer</a> &lt;<a href="#" onclick="location.href='mai'+'lto:'+'wie'+'de'+'mey'+'er'+'@cs'+'.u'+'ni-'+'br'+'eme'+'n.'+'de'; return false;">wiede<span style="display: none;">.nosp@m.</span>meye<span style="display: none;">.nosp@m.</span>r@cs.<span style="display: none;">.nosp@m.</span>uni-<span style="display: none;">.nosp@m.</span>breme<span style="display: none;">.nosp@m.</span>n.de</a>&gt;, <a href="http://ai.uni-bremen.de/">Institute for Artificial Intelligence</a>, University of Bremen</li>
</ul>
<p><em>Note:</em> <em><b>Please use the GitHub issues</b></em> <em>for questions and problems regarding the iai_kinect2 package and its components.</em> <em><b>Do not write emails.</b></em></p>
<h2>Description</h2>
<p>This is a bridge between <a href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a> and ROS.</p>
<h3>Highlights</h3>
<ul>
<li>delivers up to 30 frames per second on non high end hardware</li>
<li>delivers up to 30 frames per second over gigabit ethernet</li>
<li>support for compressed image transport</li>
<li>utilizes multiple cores and uses special OpenCL based implementation of the depth registration</li>
</ul>
<h2>Dependencies</h2>
<ul>
<li>ROS Hydro/Indigo</li>
<li>OpenCV</li>
<li><a href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a></li>
</ul>
<p><em>for the ROS packages look at the package.xml</em></p>
<h2>First steps</h2>
<p>For the depth registration the camera intrinsic and extrinsic parameters need to be known. The program reads in the values from the <code>data/&lt;serialnumber&gt;</code> folder. For each new sensor you need to add a sub-folder with the serial number of the device as the folder name. In this folder you need to provide 4 yaml files with the intrinsic and extrinsic parameters. These files can be created by the <code>kinect2_calibration</code> tool (or you can copy the files provided in one of the other folders, but results can be sub optimal). The device serial number is shown when <code>kinect2_bridge</code> or <code>Protonect</code> from libfreenect2 is started, it also appears in <code>dmesg</code> when you connect the sensor. <a href="../kinect2_calibration#calibrating-the-kinect-one">More information on calibration</a>.</p>
<p>When <code>kinect2_bridge</code> is running you can use the <code>kinect2_viewer</code> to display the images or point cloud: <code>rosrun kinect2_viewer kinect2_viewer sd image</code> or <code>rosrun kinect2_viewer kinect2_viewer sd cloud</code>.</p>
<h2>Topics</h2>
<h3>HD Topics</h3>
<p>The images in this topics have a FullHD resolution (1920x1080).</p>
<p><em>Note: For correct registration of the depth image to the color image it is needed to perform a calibration.</em></p>
<div class="fragment"><div class="line">/kinect2/hd/camera_info</div><div class="line">/kinect2/hd/image_color</div><div class="line">/kinect2/hd/image_color/compressed</div><div class="line">/kinect2/hd/image_color_rect</div><div class="line">/kinect2/hd/image_color_rect/compressed</div><div class="line">/kinect2/hd/image_depth_rect</div><div class="line">/kinect2/hd/image_depth_rect/compressed</div><div class="line">/kinect2/hd/image_mono</div><div class="line">/kinect2/hd/image_mono/compressed</div><div class="line">/kinect2/hd/image_mono_rect</div><div class="line">/kinect2/hd/image_mono_rect/compressed</div><div class="line">/kinect2/hd/points</div></div><!-- fragment --><h3>Quater HD Topics</h3>
<p>The images in this topics have a quarter FullHD resolution (960x540).</p>
<p><em>Note: For correct registration of the depth image to the color image it is needed to perform a calibration.</em></p>
<div class="fragment"><div class="line">/kinect2/qhd/camera_info</div><div class="line">/kinect2/qhd/image_color</div><div class="line">/kinect2/qhd/image_color/compressed</div><div class="line">/kinect2/qhd/image_color_rect</div><div class="line">/kinect2/qhd/image_color_rect/compressed</div><div class="line">/kinect2/qhd/image_depth_rect</div><div class="line">/kinect2/qhd/image_depth_rect/compressed</div><div class="line">/kinect2/qhd/image_mono</div><div class="line">/kinect2/qhd/image_mono/compressed</div><div class="line">/kinect2/qhd/image_mono_rect</div><div class="line">/kinect2/qhd/image_mono_rect/compressed</div><div class="line">/kinect2/qhd/points</div></div><!-- fragment --><h3>IR/Depth Topics</h3>
<p>This are the raw IR and depth images from the sensor (512x424).</p>
<p><em>Note: The registration of the color image is available without a calibration. Parameters for the registration are provided by the sensor itself.</em></p>
<div class="fragment"><div class="line">/kinect2/sd/camera_info</div><div class="line">/kinect2/sd/image_color_rect</div><div class="line">/kinect2/sd/image_color_rect/compressed</div><div class="line">/kinect2/sd/image_depth</div><div class="line">/kinect2/sd/image_depth/compressed</div><div class="line">/kinect2/sd/image_depth_rect</div><div class="line">/kinect2/sd/image_depth_rect/compressed</div><div class="line">/kinect2/sd/image_ir</div><div class="line">/kinect2/sd/image_ir/compressed</div><div class="line">/kinect2/sd/image_ir_rect</div><div class="line">/kinect2/sd/image_ir_rect/compressed</div><div class="line">/kinect2/sd/points</div></div><!-- fragment --><h2>Notes</h2>
<ul>
<li>Point clouds are only published when the launch file is used. Run <code>roslaunch kinect2_bridge kinect2_bridge.launch</code>.</li>
<li>Images from the same frame have the same timestamp. Using the <code>message_filters::sync_policies::ExactTime</code> policy is recommended.</li>
</ul>
<h2>Usage</h2>
<div class="fragment"><div class="line">roslaunch kinect2_bridge kinect2_bridge.launch [options:=value]</div><div class="line">base_name:=&lt;string&gt;</div><div class="line">    default: kinect2</div><div class="line">    info:    set base name for all topics</div><div class="line">sensor:=&lt;string&gt;</div><div class="line">    default:</div><div class="line">    info:    serial of the sensor to use</div><div class="line">fps_limit:=&lt;double&gt;</div><div class="line">    default: -1.0</div><div class="line">    info:    limit the frames per second</div><div class="line">calib_path:=&lt;string&gt;</div><div class="line">    default: /home/wiedemeyer/work/src/iai_kinect2/kinect2_bridge/data/</div><div class="line">    info:    path to the calibration files</div><div class="line">use_png:=&lt;bool&gt;</div><div class="line">    default: false</div><div class="line">    info:    Use PNG compression instead of TIFF</div><div class="line">jpeg_quality:=&lt;int&gt;</div><div class="line">    default: 90</div><div class="line">    info:    JPEG quality level from 0 to 100</div><div class="line">png_level:=&lt;int&gt;</div><div class="line">    default: 1</div><div class="line">    info:    PNG compression level from 0 to 9</div><div class="line">depth_method:=&lt;string&gt;</div><div class="line">    default: cuda</div><div class="line">    info:    Use specific depth processing: default, cpu, opengl, opencl, cuda, clkde, cudakde</div><div class="line">depth_device:=&lt;int&gt;</div><div class="line">    default: -1</div><div class="line">    info:    openCL device to use for depth processing</div><div class="line">reg_method:=&lt;string&gt;</div><div class="line">    default: opencl</div><div class="line">    info:    Use specific depth registration: default, cpu, opencl</div><div class="line">reg_device:=&lt;int&gt;</div><div class="line">    default: -1</div><div class="line">    info:    openCL device to use for depth registration</div><div class="line">max_depth:=&lt;double&gt;</div><div class="line">    default: 12.0</div><div class="line">    info:    max depth value</div><div class="line">min_depth:=&lt;double&gt;</div><div class="line">    default: 0.1</div><div class="line">    info:    min depth value</div><div class="line">queue_size:=&lt;int&gt;</div><div class="line">    default: 2</div><div class="line">    info:    queue size of publisher</div><div class="line">bilateral_filter:=&lt;bool&gt;</div><div class="line">    default: true</div><div class="line">    info:    enable bilateral filtering of depth images</div><div class="line">edge_aware_filter:=&lt;bool&gt;</div><div class="line">    default: true</div><div class="line">    info:    enable edge aware filtering of depth images</div><div class="line">publish_tf:=&lt;bool&gt;</div><div class="line">    default: false</div><div class="line">    info:    publish static tf transforms for camera</div><div class="line">base_name_tf:=&lt;string&gt;</div><div class="line">    default: as base_name</div><div class="line">    info:    base name for the tf frames</div><div class="line">worker_threads:=&lt;int&gt;</div><div class="line">    default: 4</div><div class="line">    info:    number of threads used for processing the images</div></div><!-- fragment --><h2>Key bindings</h2>
<p>Terminal:</p><ul>
<li><code>CRTL</code>+<code>c</code>: Quit </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
